{"version":3,"sources":["../../../../../assets/Script/LoginTest/assets/Script/LoginTest/LoginTest.js"],"names":["socket","require","cc","Class","extends","Component","properties","onLoad","scn","connect","onfire","on","getHomeData","bind","loginAtMessage","onRedPointHandle","data","prompt","length","ttqp_global","redPointArray","user_285LoginBtnClick","event","parm","send","user_13LoginBtnClick","user_14LoginBtnClick","onLoginBtnClick","currentUserData","userInfo","onGetHomeData","params","userId","token","console","log","currentUserInfo","director","loadScene"],"mappings":"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","file":"LoginTest.js","sourceRoot":"../../../../../assets/Script/LoginTest","sourcesContent":["var socket = require(\"websocketScript\");\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        \n    },\n\n    onLoad () {\n\n        cc.scn = {};\n        cc.scn.socket = socket.connect('home');\n        \n        // home场景，用户信息接口回调\n        onfire.on(\"HomeDataHandle\",this.getHomeData.bind(this));\n        onfire.on(\"loginAtMessage\",this.loginAtMessage.bind(this));\n\n        // 红点主推接口\n        onfire.on(\"HomeGetRedPointHandle\", this.onRedPointHandle.bind(this));\n    },\n\n    /**\n     * 配置邮件按钮右上角的红点图标\n     */\n    onRedPointHandle(data) {\n        if (!data || !data.prompt || data.prompt.length == 0) return;\n        ttqp_global.redPointArray = data.prompt;\n    },\n\n    user_285LoginBtnClick(event) {\n        var parm = {'userName': 'test','userPwd': '123456'};     // roleId = 285\n        cc.scn.socket.send(10102,parm);\n    },\n\n    user_13LoginBtnClick(event) {\n        var parm = {'userName': 'tourists_34','userPwd': '123456'};     // roleId = 285\n        cc.scn.socket.send(10102,parm);\n    },\n\n    user_14LoginBtnClick(event) {\n        var parm = {'userName': 'tourists_35','userPwd': '123456'};     // roleId = 285\n        cc.scn.socket.send(10102,parm);\n    },\n\n    onLoginBtnClick(event) {\n        // var parm = {'userName': 'test','userPwd': '123456'};     // roleId = 13\n        var parm = {'userName': 'tourists_36','userPwd': '123456'};     // roleId = 15\n        // var parm = {'userName': 'tourists_34','userPwd': '123456'};     // roleId = 285\n        // var parm = {'userName': 'tourists_35','userPwd': '123456'};     // roleId = 14\n        cc.scn.socket.send(10102,parm);\n        \n    },\n\n    // 登录 处理时间回调\n    loginAtMessage(data) {\n\n        ttqp_global.currentUserData = data.userInfo;\n        // cc.director.loadScene('Home');\n\n        this.onGetHomeData();\n    },\n    // 获取 游戏大厅 基本数据\n    onGetHomeData() {\n        let params = {\n            \"userId\": ttqp_global.currentUserData.userId ? ttqp_global.currentUserData.userId : \"\",\n            \"token\": ttqp_global.currentUserData.token ? ttqp_global.currentUserData.token : \"\",\n            \"sys\": 0,\n            \"mac\": ''\n        };\n        cc.scn.socket.send(10101, params);\n    },\n    // home场景，用户信息接口回调\n    getHomeData(data) {\n        console.log('home data == >' + data);\n        if (!data) return;\n        // this.home_data = data;\n        ttqp_global.currentUserInfo = data;\n\n        // 给顶部栏赋值\n        // this.topBgView.getComponent('HomeTopView').onConfigUI(this.home_data);\n\n        cc.director.loadScene('Home');\n    },\n});\n"]}
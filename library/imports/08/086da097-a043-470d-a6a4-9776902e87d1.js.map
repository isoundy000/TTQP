{"version":3,"sources":["../../../../../../assets/Script/HomeScript/HomeAddFriendView/assets/Script/HomeScript/HomeAddFriendView/HomeAddFriendView.js"],"names":["cc","Class","extends","Component","properties","contentView","Node","idEditBox","EditBox","onLoad","self","node","getComponent","onClickLightGrayBg","onShowView","callback","onfire","on","onAddFriendHandle","bind","isShow","roleId","active","scaleAmin","scaleTo","runAction","length","string","onBackRoleId","scaleAmin1","scaleAmin2","sequence","roleIdFormatter","count","i","onAddFriendRequest","friendID","console","log","params","scn","socket","send","data","onMenusBtnClick","event","onCloseBtnClick"],"mappings":"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","file":"HomeAddFriendView.js","sourceRoot":"../../../../../../assets/Script/HomeScript/HomeAddFriendView","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // 子控件背景View\n        contentView: cc.Node,\n\n        // ID输入框\n        idEditBox: cc.EditBox,\n    },\n\n    onLoad() {\n        var self = this;\n        this.node.getComponent('HomeSyncClickBgNode').onClickLightGrayBg(() => {\n            self.onShowView(false, self.callback);\n        });\n\n        onfire.on(\"HomeAddFriendHandle\",this.onAddFriendHandle.bind(this));\n     },\n\n    /**\n     * 弹出/关闭 窗口\n     * @param {是否弹出} isShow      \n     * @param {回调函数，在点击使用的时候回调} callback \n     */\n    onShowView(isShow, roleId, callback) {\n        this.callback = callback;\n        this.roleId = roleId;\n        this.node.active = isShow;\n\n        var scaleAmin = cc.scaleTo(0.000001, 0.8, 0.8);\n        this.contentView.runAction(scaleAmin);\n        if (isShow) {\n            if (roleId && roleId.length > 0) {\n                this.idEditBox.string = this.onBackRoleId(roleId);\n            } else {\n                this.idEditBox.string = \"\";\n            }\n            var scaleAmin1 = cc.scaleTo(0.000001, 0.8, 0.8);\n            var scaleAmin2 = cc.scaleTo(0.2, 1, 1);\n            this.contentView.runAction(cc.sequence(scaleAmin1, scaleAmin2));\n        } else {\n            var scaleAmin = cc.scaleTo(0, 0.8, 0.8);\n            this.contentView.runAction(scaleAmin);\n        }\n    },\n\n    onBackRoleId(roleId) {\n        let roleIdFormatter = roleId;\n        let count = 6 - roleId.length;\n        for (let i = 0; i < count; i++) {\n            roleIdFormatter = \"0\" + roleIdFormatter;\n        }\n        return roleIdFormatter;\n    },\n\n    /****************************************  本类发送接口相关  ****************************************/\n    // 发送添加好友的接口\n    onAddFriendRequest() {\n        var friendID = this.idEditBox.string ? this.idEditBox.string : \"\";\n        if (friendID.length == 0) {\n            console.log(\"在这里提示，好友ID不能为空\");\n            return;\n        }\n\n        let count = 6 - friendID.length;\n        for (let i = 0; i < count; i++) {\n            friendID = \"0\" + friendID;\n        }\n        var params = {\n            \"friendId\": friendID\n        };\n        cc.scn.socket.send(10701, params);\n    },\n    /****************************************  本类接口响应回调  ****************************************/\n    // 好友列表接口回调\n    onAddFriendHandle(data) {\n        this.onShowView(false, this.callback);\n    },\n\n    /****************************************  本类事件监听  ****************************************/\n    /**\n     * 点击发送邀请按钮\n     */\n    onMenusBtnClick(event) {\n        // 正在发送添加好友的请求\n        console.log('正在发送添加好友的请求');\n        this.onAddFriendRequest();\n    },\n    /**\n     * 关闭按钮\n     */\n    onCloseBtnClick(event) {\n        this.onShowView(false, this.callback);\n    },\n\n});\n"]}
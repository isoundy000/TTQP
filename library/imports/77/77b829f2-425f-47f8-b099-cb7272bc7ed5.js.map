{"version":3,"sources":["../../../../../../assets/Script/jajaleScript/combat/assets/Script/jajaleScript/combat/combatScript.js"],"names":["jajaleState","require","StateEnum","cc","Enum","READY","BET","DEAL","DEAL_END","TWIST","CLEARING","Class","extends","Component","properties","onLoad","jajaleGameStateMessage","data","console","log","status","onfire","fire"],"mappings":";;;;;;AACA,IAAIA,cAAcC,QAAQ,aAAR,CAAlB;;AAEA,IAAIC,YAAYC,GAAGC,IAAH,CAAQ;AACpBC,WAAO,CADa,EACV;AACVC,SAAK,CAFe,EAEZ;AACRC,UAAM,CAHc,EAGX;AACTC,cAAU,CAJU,EAIP;AACbC,WAAO,CALa,EAKV;AACVC,cAAU,CANU,CAMP;AANO,CAAR,CAAhB;;AASAP,GAAGQ,KAAH,CAAS;AACLC,aAAST,GAAGU,SADP;;AAGLC,gBAAY,EAHP;;AAOL;AACJ;;;;AAIIC,UAZK,oBAYK;;AAEN;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGH,KAhDI;;;AAkDLC,4BAAwB,gCAASC,IAAT,EAAe;AACnCC,gBAAQC,GAAR,CAAYF,KAAKG,MAAjB,EAAyB,YAAzB;;AAEA,gBAAQH,KAAKG,MAAb;AACI,iBAAK,CAAL;AACI;AACA;AACAC,uBAAOC,IAAP,CAAY,wBAAZ;AACA;AACJ,iBAAK,CAAL;AACI;AACA;AACAD,uBAAOC,IAAP,CAAY,sBAAZ;AACA;AACJ,iBAAK,CAAL;AACI;AACA;AACAD,uBAAOC,IAAP,CAAY,uBAAZ;AACA;AACJ,iBAAK,CAAL;AACI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAD,uBAAOC,IAAP,CAAY,4BAAZ;AACA;AACJ,iBAAK,CAAL;AACI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAD,uBAAOC,IAAP,CAAY,4BAAZ;AACA;AACJ,iBAAK,CAAL;AACI;AACA;AACA;AACAD,uBAAOC,IAAP,CAAY,wBAAZ;AACA;;AAEJ;AACI;AA/CR;AAiDH;AAtGI,CAAT","file":"combatScript.js","sourceRoot":"../../../../../../assets/Script/jajaleScript/combat","sourcesContent":["\nvar jajaleState = require(\"jajaleState\");\n\nvar StateEnum = cc.Enum({\n    READY: 1, // 等待准备\n    BET: 2, // 下注\n    DEAL: 3, // 发牌\n    DEAL_END: 4, // A开牌\n    TWIST: 5, // B开牌\n    CLEARING: 6, // 结算\n})\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n/**\n * 状态机\n * 等待准备 > 下注 > 发牌 > A开牌/B开牌 > 结算\n */\n    onLoad () {\n\n        // console.log(32,cc.jajale.enterRoomData);\n\n        // this.statusArr = [];\n\n        // cc.jajale.state = jajaleState.connect('clearing');\n   \n        // onfire.on('jajaleGameStateMessage',this.jajaleGameStateMessage.bind(this));\n\n        // if (cc.jajale.enterRoomData.status ===1) {\n        //     // 等待\n        //     cc.jajale.state = jajaleState.connect();\n        // }\n        // else if (cc.jajale.enterRoomData.status ===2) {\n        //     // 下注\n        //     cc.jajale.state = jajaleState.connect('下注');\n        // }\n        // else if (cc.jajale.enterRoomData.status ===3) {\n        //     // 发牌\n        //     cc.jajale.state = jajaleState.connect('发牌');\n        // }\n        // else if (cc.jajale.enterRoomData.status ===4) {\n        //     // A开牌\n        //     cc.jajale.state = jajaleState.connect('A开牌');\n        // }\n        // else if (cc.jajale.enterRoomData.status ===5) {\n        //     // B开牌\n        //     cc.jajale.state = jajaleState.connect('B开牌');\n        // }\n        // else if (cc.jajale.enterRoomData.status ===6) {\n        //     // 结算\n        //     cc.jajale.state = jajaleState.connect('结算');\n        // }\n        \n\n    },\n    \n    jajaleGameStateMessage: function(data) {\n        console.log(data.status, '游戏状态发生改变22');\n        \n        switch (data.status) {\n            case 1:\n                // 等待准备\n                // cc.jajale.state.fsm.clearingHandle();\n                onfire.fire('jajaleReadyStateHandle');\n                break;\n            case 2:\n                // 下注\n                // cc.jajale.state.fsm.readyHandle();\n                onfire.fire('jajaleBetStateHandle');\n                break;\n            case 3:\n                // 发牌\n                // cc.jajale.state.fsm.betHandle();\n                onfire.fire('jajaleDealStateHandle');\n                break;\n            case 4:\n                // A开牌\n                // this.statusArr.push(4);\n                // // this.statusArr.indexOf(5) > -1  是否包含的判断\n                // if (this.statusArr.indexOf(5) > -1) {\n                //     // 先执行了5 B开牌了\n                //     cc.jajale.state.fsm.dealBHandle();\n                // }else {\n                //     cc.jajale.state.fsm.dealAHandle();\n                // }\n                onfire.fire('jajaleAOpenCardStateHandle');\n                break;\n            case 5:\n                // B开牌\n                // this.statusArr.push(5);\n                // if (this.statusArr.indexOf(4) > -1) {\n                //     // 先执行了4 A开牌了\n                //     cc.jajale.state.fsm.openAHandle();\n                // }else {\n                //     cc.jajale.state.fsm.openBHandle();\n                // }\n                onfire.fire('jajaleBOpenCardStateHandle');\n                break;\n            case 6:\n                // 结算\n                // this.statusArr = [];\n                // cc.jajale.state.fsm.openCardHandle();\n                onfire.fire('jajaleClearStateHandle');\n                break;\n        \n            default:\n                break;\n        }\n    }, \n});\n"]}
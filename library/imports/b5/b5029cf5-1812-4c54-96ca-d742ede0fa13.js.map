{"version":3,"sources":["../../../../../../assets/Script/HomeScript/HomeActivityShowView/assets/Script/HomeScript/HomeActivityShowView/HomeActivityTaskView.js"],"names":["cc","Class","extends","Component","properties","scrollView","ScrollView","scrollContent","Node","itemPrefab","Prefab","shareTitleBtn","chongzhiTitleBtn","onLoad","onfire","on","onGetTaskData","bind","onGetTaskGetDeward","onShowView","isShow","node","active","taskIdx","taskList","getTaskIdx","getComponent","onStatus","onGetTaskDataRequest","onCreateItem","removeAllChildren","i","taskData","item","instantiate","addChild","self","init","taskDic","idx","onGetTaskGetDewardRequest","length","scn","socket","send","taskNum","id","parseInt","species","data","splice","onMenusClick","event","customData"],"mappings":"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","file":"HomeActivityTaskView.js","sourceRoot":"../../../../../../assets/Script/HomeScript/HomeActivityShowView","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        scrollView: cc.ScrollView,\n        scrollContent: cc.Node,\n        itemPrefab: cc.Prefab,\n\n        // 分享任务 切换按钮\n        shareTitleBtn: cc.Node,\n        // 充值任务 切换按钮\n        chongzhiTitleBtn: cc.Node,\n    },\n\n    onLoad () {\n        // 获取任务列表\n        onfire.on(\"HomeTaskDetailHandle\",this.onGetTaskData.bind(this));\n        // 领取任务奖励\n        onfire.on(\"HomeTaskGetDewardHandle\",this.onGetTaskGetDeward.bind(this));\n    },\n\n    onShowView(isShow) {\n        this.node.active = isShow;\n        if (isShow) {\n\n            // 任务类型 0 == 分享任务；1 == 充值任务  默认分享任务\n            this.taskIdx = 0;\n            // 任务数据列表\n            this.taskList = [];\n            // 获取完成的任务索引\n            this.getTaskIdx = 0;\n\n            this.shareTitleBtn.getComponent('HomeSelectImgTitleBtn').onStatus(this.taskIdx == 0);\n            this.chongzhiTitleBtn.getComponent('HomeSelectImgTitleBtn').onStatus(this.taskIdx == 1);\n\n            // 获取任务列表\n            this.onGetTaskDataRequest();\n        }\n    },\n\n    onCreateItem() {\n\n        this.scrollContent.removeAllChildren();\n\n        for (let i = 0; i < this.taskList.length; i++) {\n            const taskData = this.taskList[i];\n\n            let item = cc.instantiate(this.itemPrefab);\n            this.scrollContent.addChild(item);\n\n            let self = this;\n            item.getComponent('HomeAcitivityTaskItem').init(taskData, i, (taskDic, idx)=>{\n                self.getTaskIdx = idx;\n                self.onGetTaskGetDewardRequest(taskDic);\n            });\n        }\n    },\n    \n    /****************************************  本类接口相关  ****************************************/\n    // 获取任务列表\n    onGetTaskDataRequest() {\n        cc.scn.socket.send(10803, {\n            taskNum: this.taskIdx,\n        });\n\n        this.shareTitleBtn.getComponent('HomeSelectImgTitleBtn').onStatus(this.taskIdx == 0);\n        this.chongzhiTitleBtn.getComponent('HomeSelectImgTitleBtn').onStatus(this.taskIdx == 1);\n    },\n    // 领取任务奖励\n    onGetTaskGetDewardRequest(taskDic) {\n        cc.scn.socket.send(10804, {\n            id: parseInt(taskDic.id),\n            species: parseInt(taskDic.species)\n        });\n    },\n\n    /****************************************  本类接口回调相关  ****************************************/\n    // 获取任务列表\n    onGetTaskData(data) {\n        this.taskList = data;\n        this.onCreateItem();\n    },\n    // 领取任务奖励\n    onGetTaskGetDeward(data) {\n        this.taskList.splice(this.getTaskIdx, 1);\n        this.onCreateItem();\n    },\n\n    onMenusClick (event, customData) {\n        let idx = parseInt(customData);\n\n        this.taskIdx = idx;\n\n        this.onGetTaskDataRequest();\n    },\n});\n"]}
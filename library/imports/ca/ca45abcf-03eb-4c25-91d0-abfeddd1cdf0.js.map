{"version":3,"sources":["../../../../../../assets/Script/HomeScript/HomePersonInfoView/assets/Script/HomeScript/HomePersonInfoView/HomePersonInfoView.js"],"names":["socket","require","cc","Class","extends","Component","properties","contentView","Node","headIcon","nameLabel","Label","idLabel","goldLabel","zuanLabel","sexBtn","phoneLabel","bindBtn","allCountLabel","weekYingliLabel","sigleMaxMoneyLabel","allMaxMoneyLabel","bindPhoneView","gameLogView","onLoad","onfire","on","onGetPersonDetailInfoHandle","bind","onConfigUI","string","personInfo","ID","toString","gold","diamond","nickname","totalNum","weekProfit","onePlayMax","hisMaxGold","phone","getComponent","active","length","onStatus","parseInt","sex","console","log","onShowView","isShow","node","moveAction","moveTo","p","runAction","onGetPersonDetailInfoRequest","setPositionY","scn","send","type","roleId","ttqp_global","currentUserInfo","data","onMenusBtnClick","event","customData","idx","self","onCloseBtnClick"],"mappings":"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","file":"HomePersonInfoView.js","sourceRoot":"../../../../../../assets/Script/HomeScript/HomePersonInfoView","sourcesContent":["var socket = require(\"websocketScript\");\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        contentView: cc.Node,\n\n        headIcon: cc.Node,\n        nameLabel: cc.Label,\n        idLabel: cc.Label,\n        goldLabel: cc.Label,\n        zuanLabel: cc.Label,\n        sexBtn: cc.Node,\n\n        phoneLabel: cc.Node,\n        bindBtn: cc.Node,\n\n        // 总局数\n        allCountLabel: cc.Label,\n        // 周盈利\n        weekYingliLabel: cc.Label,\n        // 单局最高\n        sigleMaxMoneyLabel: cc.Label,\n        // 最高资产\n        allMaxMoneyLabel: cc.Label,\n\n\n        // 绑定手机弹窗\n        bindPhoneView: cc.Node,\n        // 牌局记录弹窗\n        gameLogView: cc.Node,\n    },\n\n    onLoad() {\n        onfire.on(\"HomeGetUserInfoHandle\", this.onGetPersonDetailInfoHandle.bind(this));\n    },\n\n    onConfigUI() {\n        //\n        this.idLabel.string = \"ID:\" + this.personInfo.ID.toString();\n        this.goldLabel.string = this.personInfo.gold.toString();\n        this.zuanLabel.string = this.personInfo.diamond.toString();\n        this.nameLabel.string = this.personInfo.nickname.toString();\n        this.allCountLabel.string = this.personInfo.totalNum.toString();\n        this.weekYingliLabel.string = this.personInfo.weekProfit.toString();\n        this.sigleMaxMoneyLabel.string = this.personInfo.onePlayMax.toString();\n        this.allMaxMoneyLabel.string = this.personInfo.hisMaxGold.toString();\n        let phone = this.personInfo.phone ? this.personInfo.phone.toString() : \"\";\n        this.phoneLabel.getComponent(cc.Label).string = \"电话:\" + phone;\n        this.phoneLabel.active = phone.length == 0 ? false : true;\n        this.bindBtn.active = !this.phoneLabel.active;\n\n        this.sexBtn.getComponent('HomeSelectBtn').onStatus(parseInt(this.personInfo.sex) == 2);\n \n        console.log(\"头像的加载出问题，后期再解决\");\n        // let self = this;\n        // if (this.personInfo.headImgurl.length) {\n        //     cc.loader.load(this.personInfo.headImgurl, function (err, texture) {\n        //         self.headIcon.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);\n        //     });\n        // }\n    },\n\n    /**\n     * 弹出/关闭 窗口\n     * @param {是否弹出} isShow           \n     */\n    onShowView(isShow) {\n\n        this.node.active = isShow;\n        if (isShow) {\n            var moveAction = cc.moveTo(0.2, cc.p(0, 0));\n            this.contentView.runAction(moveAction);\n\n            this.onGetPersonDetailInfoRequest();\n        } else {\n            this.contentView.setPositionY(-1300);\n        }\n    },\n\n    /****************************  本类接口相关  *************************/\n    onGetPersonDetailInfoRequest() {\n        \n        cc.scn.socket.send(10401, {\n            type: 1,\n            roleId: ttqp_global.currentUserInfo ? ttqp_global.currentUserInfo.roleId : \"\"\n        });\n    },\n\n    /*********************** 本类接口回调相关  **********************/\n    onGetPersonDetailInfoHandle(data) {\n        if (!data || this.node.active == false) return;\n\n        this.personInfo = data;\n        this.onConfigUI();\n    },\n\n\n    onMenusBtnClick(event, customData) {\n        let idx = parseInt(customData);\n        if (idx == 0) {\n            let self = this;\n            this.bindPhoneView.getComponent('HomeAddPhoneView').onShowView(true, (phone) => {\n                self.phoneLabel.getComponent(cc.Label).string  = phone;\n                self.phoneLabel.active = true;\n                self.bindBtn.active = !self.phoneLabel.active;\n            });\n        } else {\n            this.gameLogView.getComponent('HomeGameLogView').onShowView(true);\n        }\n    },\n\n    onCloseBtnClick(event) {\n        this.onShowView(false);\n    },\n});\n"]}
{"version":3,"sources":["../../../../../../assets/Script/HomeScript/HomeSettingView/assets/Script/HomeScript/HomeSettingView/HomeSettingView.js"],"names":["cc","Class","extends","Component","properties","contentView","Node","applyAgentBtn","agentInfoBtn","ioIconOpenX","ioIconCloseX","isOpenMusic","musicTagIcon","isOpenYinXiao","yinXiaoTagIcon","isOpenZhenDong","zhenDongTagIcon","isOpenTeXiao","teXiaoTagIcon","checkboxSpFrames","SpriteFrame","boyCheckbox","girlCheckbox","isBoy","applyForDailiView","updatePwdView","yaoqingrenIDView","dailiInfoView","onLoad","self","node","getComponent","onClickLightGrayBg","onShowView","onfire","on","onGetUserIsApplyAgent","bind","onSetSexHandle","onConfigUI","onIOBtnClick","sexIdx","ttqp_global","currentUserInfo","sex","sexClickIdx","onConfigSexNode","onGetUserIsApplyAgentRequest","Sprite","spriteFrame","isShow","active","moveAction","moveTo","p","runAction","setPositionY","scn","socket","send","onSetUserSex","params","data","isRegisterAgent","parseInt","customData","onCloseBtnClick","event","onSexBtnClick","console","log","btnTag","currentTarget","onStatus","onMenusBtnClick","itemIdx"],"mappings":"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","file":"HomeSettingView.js","sourceRoot":"../../../../../../assets/Script/HomeScript/HomeSettingView","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // 子控件的背景View\n        contentView: cc.Node,\n\n        /******************  代理相关的两个按钮  ******************/\n        // 申请代理\n        applyAgentBtn: cc.Node,\n        // 代理信息\n        agentInfoBtn: cc.Node,\n\n\n        /******************  开关按钮Node相关  ******************/\n        // 状态圆圈为开状态下的位置和为关状态下的位置\n        ioIconOpenX: 0,\n        ioIconCloseX: 0,\n        // 是否开启音乐\n        isOpenMusic: false,\n        // 音乐开关标记的⭕️\n        musicTagIcon: cc.Node,\n        // 是否开启音效\n        isOpenYinXiao: false,\n        // 音效开关标记的⭕️\n        yinXiaoTagIcon: cc.Node,\n        // 是否开启震动\n        isOpenZhenDong: false,\n        // 震动开关标记的⭕️\n        zhenDongTagIcon: cc.Node,\n        // 是否开启特效\n        isOpenTeXiao: false,\n        // 特效开关标记的⭕️\n        teXiaoTagIcon: cc.Node,\n\n        /******************  男女选择相关  ******************/\n        // 选中和反选图片\n        checkboxSpFrames: [cc.SpriteFrame],\n        // 男性 图标\n        boyCheckbox: cc.Node,\n        // 女性 图标\n        girlCheckbox: cc.Node,\n        // 是否是男性\n        isBoy: true,\n\n        /******************  子级弹窗  ******************/\n        // 申请代理弹窗\n        applyForDailiView: cc.Node,\n        // 修改密码弹窗\n        updatePwdView: cc.Node,\n        // 邀请人ID\n        yaoqingrenIDView: cc.Node,\n        // 代理信息\n        dailiInfoView: cc.Node,\n\n    },\n\n    onLoad() {\n        var self = this;\n        this.node.getComponent('HomeSyncClickBgNode').onClickLightGrayBg(() => {\n            self.onShowView(false);\n        });\n\n        onfire.on(\"HomeIsApplyAgentHandle\", this.onGetUserIsApplyAgent.bind(this));\n        onfire.on(\"HomeSetSexHandle\", this.onSetSexHandle.bind(this));\n    },\n\n    /**\n     * 本类UI配置\n     */\n    onConfigUI() {\n        this.onIOBtnClick(null, \"0\");\n        this.onIOBtnClick(null, \"1\");\n        this.onIOBtnClick(null, \"2\");\n        this.onIOBtnClick(null, \"3\");\n\n        let sexIdx = ttqp_global.currentUserInfo.sex;\n        if (sexIdx != 2) {  // 这个值有0，1，2，0是默认男，1是男，2是女\n            this.isBoy = true;\n            this.sexClickIdx = 0;\n        } else {\n            this.isBoy = false;\n            this.sexClickIdx = 1;\n        }\n        this.onConfigSexNode(this.isBoy);\n\n        // 获取玩家是否注册过代理请求\n        this.onGetUserIsApplyAgentRequest();\n    },\n\n    // 设置性别标记\n    onConfigSexNode(isBoy) {\n        this.boyCheckbox.getComponent(cc.Sprite).spriteFrame = this.checkboxSpFrames[isBoy ? 1 : 0];\n        this.girlCheckbox.getComponent(cc.Sprite).spriteFrame = this.checkboxSpFrames[!isBoy ? 1 : 0];\n    },\n\n    /**\n     * 弹出/关闭 窗口\n     * @param {是否弹出} isShow         \n     * @param {背包内的商品列表数组} pack_shop_list    \n     * @param {回调函数，在点击使用的时候回调} callback \n     */\n    onShowView(isShow) {\n\n        this.node.active = isShow;\n        if (isShow) {\n            var moveAction = cc.moveTo(0.2, cc.p(0, 0));\n            this.contentView.runAction(moveAction);\n\n            this.onConfigUI();\n        } else {\n            this.contentView.setPositionY(-1300);\n        }\n    },\n\n    /*********************** 发送接口 ***********************/\n    /**\n     * 获取玩家是否注册过代理请求\n     */\n    onGetUserIsApplyAgentRequest() {\n        cc.scn.socket.send(10907);\n    },\n\n    /**\n     * 设置性别\n     */\n    onSetUserSex() {\n        let params = {\n            \"sex\": this.sexClickIdx == 0 ? 1 : 2,\n        };\n        cc.scn.socket.send(10908, params);\n    },\n\n    /*********************** 接口回调 ***********************/\n    /**\n     * 获取玩家是否注册过代理回调\n     */\n    onGetUserIsApplyAgent(data) {\n        if (data) {\n            this.applyAgentBtn.active = data.isRegisterAgent == 1;\n            this.agentInfoBtn.active = !this.applyAgentBtn.active;\n        }\n    },\n    /**\n     * 设置性别回调\n     */\n    onSetSexHandle(data) {\n        //\n        this.isBoy = parseInt(customData) == 0;\n        this.onConfigSexNode(this.isBoy);\n    },\n\n\n    /****************************************  本类事件监听  ****************************************/\n    /// 关闭按钮的点击\n    onCloseBtnClick(event) {\n        this.onShowView(false);\n    },\n    /// 性别按钮的点击\n    onSexBtnClick(event, customData) {\n        this.sexClickIdx = parseInt(customData);\n        if (ttqp_global.currentUserInfo.sex == 0) {\n            this.onSetUserSex();\n        } else {\n            console.log(\"用户性别只能修改一次，修改过后，用户性别就不能更改了\");\n        }\n    },\n    /// 开关按钮的点击\n    onIOBtnClick(event, customData) {\n        var btnTag = parseInt(customData);\n\n        switch (btnTag) {\n            case 0: {\n                this.isOpenMusic = !this.isOpenMusic;\n                var moveAction = cc.moveTo(0.2, cc.p(this.isOpenMusic ? this.ioIconOpenX : this.ioIconCloseX, 0));\n                this.musicTagIcon.runAction(moveAction);\n                if (event) {\n                    event.currentTarget.getComponent('HomeSelectBtn').onStatus(this.isOpenMusic);\n                }\n            }\n                break;\n            case 1: {\n                this.isOpenYinXiao = !this.isOpenYinXiao;\n                var moveAction = cc.moveTo(0.2, cc.p(this.isOpenYinXiao ? this.ioIconOpenX : this.ioIconCloseX, 0));\n                this.yinXiaoTagIcon.runAction(moveAction);\n                if (event) {\n                    event.currentTarget.getComponent('HomeSelectBtn').onStatus(this.isOpenYinXiao);\n                }\n            }\n                break;\n            case 2: {\n                this.isOpenZhenDong = !this.isOpenZhenDong;\n                var moveAction = cc.moveTo(0.2, cc.p(this.isOpenZhenDong ? this.ioIconOpenX : this.ioIconCloseX, 0));\n                this.zhenDongTagIcon.runAction(moveAction);\n                if (event) {\n                    event.currentTarget.getComponent('HomeSelectBtn').onStatus(this.isOpenZhenDong);\n                }\n            }\n                break;\n            case 3: {\n                this.isOpenTeXiao = !this.isOpenTeXiao;\n                var moveAction = cc.moveTo(0.2, cc.p(this.isOpenTeXiao ? this.ioIconOpenX : this.ioIconCloseX, 0));\n                this.teXiaoTagIcon.runAction(moveAction);\n                if (event) {\n                    event.currentTarget.getComponent('HomeSelectBtn').onStatus(this.isOpenTeXiao);\n                }\n            }\n                break;\n\n            default:\n                break;\n        }\n    },\n    /// 功能按钮的点击\n    onMenusBtnClick(event, customData) {\n        let itemIdx = parseInt(customData);\n        switch (itemIdx) {\n            case 0: {   // 申请代理\n                let self = this;\n                this.applyForDailiView.getComponent('HomeSetApplyForDailiView').onShowView(true, () => {\n                    //\n                    self.onGetUserIsApplyAgentRequest();\n                });\n            }\n                break;\n            case 1: {   // 邀请人ID\n                this.yaoqingrenIDView.getComponent('HomeSetYaoqingrenIDView').onShowView(true, () => {\n                    //\n                });\n            }\n                break;\n            case 2: {   // 更改密码\n                console.log(\"修改密码的前提，是必须要手机登录的才能点击，具体获取用户登录方式，后期后台完善后再跟进\");\n\n                this.updatePwdView.getComponent('HomeSetUpdatePwdView').onShowView(true, () => {\n                    //\n                });\n            }\n                break;\n            case 3: {   // 切换账号\n                console.log(\"切换账号\");\n            }\n                break;\n            case 4: {   // 代理信息\n                this.dailiInfoView.getComponent('HomeSetDailiInfoView').onShowView(true, () => {\n                    //\n                });\n            }\n                break;\n\n            default:\n                break;\n        }\n    },\n\n});\n"]}
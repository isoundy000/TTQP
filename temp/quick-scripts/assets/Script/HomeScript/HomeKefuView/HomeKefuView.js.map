{"version":3,"sources":["HomeKefuView.js"],"names":["logList","cc","Class","extends","Component","properties","logScrollView","ScrollView","logScrollContent","Node","charRowPrefab","Prefab","msgEditBox","EditBox","onLoad","onCreateChatRow","dataList","removeAllChildren","i","length","log","item","instantiate","addChild","getComponent","init","width","scrollToBottom","onShowView","isShow","callback","node","active","onCloseBtnClick","event","onSendBtnClick","msg","string","replace","console","msgDic","push","answerDic"],"mappings":";;;;;;AAAA,IAAMA,UAAU,CACZ,EAAC,QAAQ,qBAAT,EAAgC,WAAW,eAA3C,EAA4D,QAAQ,GAApE,EADY,EAEZ,EAAC,QAAQ,qBAAT,EAAgC,WAAW,OAA3C,EAAoD,QAAQ,GAA5D,EAFY,EAGZ,EAAC,QAAQ,qBAAT,EAAgC,WAAW,KAA3C,EAAkD,QAAQ,GAA1D,EAHY,EAIZ,EAAC,QAAQ,qBAAT,EAAgC,WAAW,2BAA3C,EAAwE,QAAQ,GAAhF,EAJY,EAKZ,EAAC,QAAQ,qBAAT,EAAgC,WAAW,OAA3C,EAAoD,QAAQ,GAA5D,EALY,EAMZ,EAAC,QAAQ,qBAAT,EAAgC,WAAW,OAA3C,EAAoD,QAAQ,GAA5D,EANY,EAOZ,EAAC,QAAQ,qBAAT,EAAgC,WAAW,OAA3C,EAAoD,QAAQ,GAA5D,EAPY,EAQZ,EAAC,QAAQ,qBAAT,EAAgC,WAAW,iCAA3C,EAA8E,QAAQ,GAAtF,EARY,CAAhB;;AAWAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,uBAAeL,GAAGM,UADV;AAERC,0BAAkBP,GAAGQ,IAFb;AAGRC,uBAAeT,GAAGU,MAHV;;AAMRC,oBAAYX,GAAGY;AANP,KAHP;;AAYLC,UAZK,oBAYK,CACT,CAbI;AAeLC,mBAfK,2BAeWC,QAfX,EAeqB;;AAEtB,aAAKR,gBAAL,CAAsBS,iBAAtB;AACA,aAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIF,SAASG,MAA7B,EAAqCD,GAArC,EAA0C;AACtC,gBAAME,MAAMJ,SAASE,CAAT,CAAZ;AACA,gBAAIG,OAAOpB,GAAGqB,WAAH,CAAe,KAAKZ,aAApB,CAAX;AACA,iBAAKF,gBAAL,CAAsBe,QAAtB,CAA+BF,IAA/B;AACAA,iBAAKG,YAAL,CAAkB,iBAAlB,EAAqCC,IAArC,CAA0CL,GAA1C,EAA+C,KAAKZ,gBAAL,CAAsBkB,KAArE;AACH;AACD,aAAKpB,aAAL,CAAmBqB,cAAnB,CAAkC,GAAlC;AACH,KAzBI;;;AA2BL;;;;;AAKAC,cAhCK,sBAgCMC,MAhCN,EAgCcC,QAhCd,EAgCwB;AACzB,aAAKC,IAAL,CAAUC,MAAV,GAAmBH,MAAnB;AACA,aAAKC,QAAL,GAAgBA,QAAhB;;AAEA,YAAID,MAAJ,EAAY;AACR,iBAAKd,eAAL,CAAqBf,OAArB;AACH;AACJ,KAvCI;AAyCLiC,mBAzCK,2BAyCWC,KAzCX,EAyCkB;AACnB,aAAKN,UAAL,CAAgB,KAAhB,EAAuB,KAAKZ,QAA5B,EAAsC,KAAKc,QAA3C;AACH,KA3CI;AA6CLK,kBA7CK,0BA6CUD,KA7CV,EA6CiB;AAClB,YAAIE,MAAM,KAAKxB,UAAL,CAAgByB,MAAhB,GAAyB,KAAKzB,UAAL,CAAgByB,MAAzC,GAAkD,EAA5D;AACAD,cAAMA,IAAIE,OAAJ,CAAY,KAAZ,EAAmB,EAAnB,CAAN;;AAEA,YAAIF,IAAIjB,MAAJ,IAAc,CAAlB,EAAqB;AACjBoB,oBAAQnB,GAAR,CAAY,WAAZ;AACH,SAFD,MAEO;AACH,gBAAIoB,SAAS,EAAC,QAAQ,qBAAT,EAAgC,WAAWJ,GAA3C,EAAgD,QAAQ,GAAxD,EAAb;AACApC,oBAAQyC,IAAR,CAAaD,MAAb;;AAEA,gBAAIE,YAAY,EAAC,QAAQ,qBAAT,EAAgC,WAAWN,GAA3C,EAAgD,QAAQ,GAAxD,EAAhB;AACApC,oBAAQyC,IAAR,CAAaC,SAAb;;AAEA,iBAAK3B,eAAL,CAAqBf,OAArB;;AAEA,iBAAKY,UAAL,CAAgByB,MAAhB,GAAyB,EAAzB;AACH;AACJ;AA9DI,CAAT","file":"HomeKefuView.js","sourceRoot":"../../../../../../assets/Script/HomeScript/HomeKefuView","sourcesContent":["const logList = [\n    {\"time\": \"2018/07/01 13:42:11\", \"content\": \"我是内容我是内容我是内容1\", \"isMe\": \"0\"},\n    {\"time\": \"2018/07/02 13:42:11\", \"content\": \"我是内容2\", \"isMe\": \"1\"},\n    {\"time\": \"2018/07/03 13:42:11\", \"content\": \"内容3\", \"isMe\": \"1\"},\n    {\"time\": \"2018/07/04 13:42:11\", \"content\": \"我是内容我是内容我是内容我是内容我是内容我是内容4\", \"isMe\": \"0\"},\n    {\"time\": \"2018/07/05 13:42:11\", \"content\": \"我是内容5\", \"isMe\": \"1\"},\n    {\"time\": \"2018/07/06 13:42:11\", \"content\": \"我是内容6\", \"isMe\": \"0\"},\n    {\"time\": \"2018/07/07 13:42:11\", \"content\": \"我是内容7\", \"isMe\": \"1\"},\n    {\"time\": \"2018/07/08 13:42:11\", \"content\": \"我是内容我是内容我是内容我是内容我是内容我是内容我是内容孙女8\", \"isMe\": \"0\"},\n];\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        logScrollView: cc.ScrollView,\n        logScrollContent: cc.Node,\n        charRowPrefab: cc.Prefab,\n\n\n        msgEditBox: cc.EditBox,\n    },\n\n    onLoad () {\n    },\n\n    onCreateChatRow(dataList) {\n\n        this.logScrollContent.removeAllChildren();\n        for (let i = 0; i < dataList.length; i++) {\n            const log = dataList[i];\n            let item = cc.instantiate(this.charRowPrefab);\n            this.logScrollContent.addChild(item);\n            item.getComponent('HomeKefuChatRow').init(log, this.logScrollContent.width);\n        }\n        this.logScrollView.scrollToBottom(0.1);\n    },\n\n    /**\n     * 弹出客服界面\n     * @param {*} isShow    是否弹出\n     * @param {*} callback  需要回调就用这个\n     */\n    onShowView(isShow, callback) {\n        this.node.active = isShow;\n        this.callback = callback;\n\n        if (isShow) {\n            this.onCreateChatRow(logList);\n        }\n    },\n\n    onCloseBtnClick(event) {\n        this.onShowView(false, this.dataList, this.callback);\n    },\n\n    onSendBtnClick(event) {\n        let msg = this.msgEditBox.string ? this.msgEditBox.string : \"\";\n        msg = msg.replace(/\\n/g, '');\n        \n        if (msg.length == 0) {\n            console.log(\"请输入要发送的文字\");\n        } else {\n            let msgDic = {\"time\": \"0000/00/00 00:00:00\", \"content\": msg, \"isMe\": \"1\"};\n            logList.push(msgDic);\n\n            let answerDic = {\"time\": \"1111/11/11 11:11:11\", \"content\": msg, \"isMe\": \"0\"};\n            logList.push(answerDic);\n\n            this.onCreateChatRow(logList);\n\n            this.msgEditBox.string = \"\";\n        }\n    },\n\n});\n"]}
{"version":3,"sources":["HomeScript.js"],"names":["socket","require","cc","Class","extends","Component","properties","bottomBgView","Node","topBgView","packShowView","settingShowView","awardGetShowView","userAgreementShowView","signInShowView","emailShowView","mallView","jajale","activityView","shareView","moreView","kefuView","personInfoView","onLoad","active","onConfigUI","onfire","on","cutGameMessage","bind","test11","setTimeout","director","preloadScene","log","updateGoldAtMessage","updateDiamondAtMessage","obj","ttqp_global","currentUserInfo","diamond","gold","toString","getComponent","onKefuBtnClick","event","onShowView","onHeadBtnClick","onPackBtnClick","self","onActivityBtnClick","onSettingBtnClick","onShopBtnClick","onSignInBtnClick","onEmailBtnClick","updateData","console","onShareBtnClick","onMoreBtnClick","onIntroBtnClick","onGameType","customData","typeIdx","parseInt","scn","send","loadScene","onclose","connect","data","params","currentUserData","token","roleId"],"mappings":"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","file":"HomeScript.js","sourceRoot":"../../../../../assets/Script/HomeScript","sourcesContent":["var socket = require(\"websocketScript\");\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // 底部栏\n        bottomBgView: cc.Node,\n        // 顶部个人信息栏\n        topBgView: cc.Node,\n\n        // 背包 弹窗\n        packShowView: cc.Node,\n        // 设置 弹窗\n        settingShowView: cc.Node,\n        // 领取奖励 弹窗\n        awardGetShowView: cc.Node,\n        // 用户协议 文档\n        userAgreementShowView: cc.Node,\n        // 签到 弹窗文档\n        signInShowView: cc.Node,\n        // 邮箱 弹窗文档\n        emailShowView: cc.Node,\n        // 商城\n        mallView: cc.Node,\n        //  家家乐\n        jajale: cc.Node,\n        // 活动弹窗\n        activityView: cc.Node,\n        // 分享\n        shareView: cc.Node,\n        // 更多\n        moreView: cc.Node,\n        // 客服\n        kefuView: cc.Node,\n        // 个人信息弹窗\n        personInfoView: cc.Node,\n    },\n\n    onLoad() {\n        this.activityView.active = false;\n\n        // 现在数据是直接给定，所以再这边直接调用，要是接口数据话，还需要将配置方法放在接口回调中\n        this.onConfigUI();\n\n        // home场景，用户信息接口回调\n        // onfire.on(\"HomeDataHandle\",this.getHomeData.bind(this));\n\n        // 从大厅切换到游戏\n        onfire.on(\"cutGameMessage\", this.cutGameMessage.bind(this));\n        // 登录家家乐成功\n        onfire.on(\"loginJajaleMessage\", this.test11.bind(this));\n\n        // this.onGetHomeData();\n        setTimeout(() => {\n            cc.director.preloadScene(\"Jajale\", function () {\n                cc.log(\"预加载家家乐场景\");\n                });\n        }, 0);\n\n        // 监听金币和钻石变化\n        onfire.on(\"updateGoldAtMessage\", this.updateGoldAtMessage.bind(this));\n        onfire.on(\"updateDiamondAtMessage\", this.updateDiamondAtMessage.bind(this));\n    },\n\n    /****************************  本类接口相关  *************************/\n\n    // /*********************** 本类接口回调相关  **********************/\n\n    /**\n     * 服务器主推金币变化接口回调\n     */\n    updateGoldAtMessage: function (obj) {\n        ttqp_global.currentUserInfo.diamond = obj.gold.toString();\n    },\n\n    /**\n     * 服务器主推钻石变化接口回调\n     */\n    updateDiamondAtMessage: function (obj) {\n        ttqp_global.currentUserInfo.gold = obj.diamond.toString();\n    },\n\n    /**\n     * 配置UI相关\n     */\n    onConfigUI() {\n        // 给顶部栏赋值\n        this.topBgView.getComponent('HomeTopView').onConfigUI(ttqp_global.currentUserInfo);\n    },\n\n    /*************************  事件监听  *************************/\n    /**  * 顶部 客服 按钮的点击 */\n    onKefuBtnClick(event) {\n        this.kefuView.getComponent('HomeKefuView').onShowView(true, () => {\n            //\n        });\n    },\n\n    /**  * 顶部 头像 按钮的点击 */\n    onHeadBtnClick(event) {\n        this.personInfoView.getComponent('HomePersonInfoView').onShowView(true);\n    },\n\n    /**  * 底部 背包 按钮的点击 */\n    onPackBtnClick(event) {\n        var self = this;\n        this.packShowView.getComponent('HomePackView').onShowView(true);\n    },\n\n    /**  * 底部 活动 按钮的点击 */\n    onActivityBtnClick(event) {\n        var self = this;\n        this.activityView.getComponent('HomeActivityView').onShowView(true);\n    },\n\n    /**  * 底部 设置 按钮的点击 */\n    onSettingBtnClick(event) {\n        var self = this;\n        this.settingShowView.getComponent('HomeSettingView').onShowView(true);\n    },\n\n    /**  * 底部 商城 按钮的点击 */\n    onShopBtnClick(event) {\n        // cc.director.loadScene('MallScene');\n        this.mallView.active = true;\n        \n    },\n\n    /**  * 底部 签到 按钮的点击 */\n    onSignInBtnClick(event) {\n        let self = this;\n        this.signInShowView.getComponent('HomeSignInShowView').onShowView(\n            true, () => {\n            });\n    },\n\n    /**  * 底部 邮件 按钮的点击 */\n    onEmailBtnClick(event) {\n        var self = this;\n        let emailShowView = this.emailShowView.getComponent('HomeEmailShowView');\n        emailShowView.onShowView(\n            true,\n            (updateData) => {\n                console.log(\"邮件回调，需要做什么在这里做\");\n            });\n    },\n\n    /**  * 底部 分享 按钮的点击 */\n    onShareBtnClick(event) {\n        this.shareView.getComponent('HomeShareShowView').onShowView(true);\n    },\n\n    /**  * 底部 更多 按钮的点击 */\n    onMoreBtnClick(event) {\n        this.moreView.active = !this.moreView.active;\n    },\n\n    /**  * 底部 说明 按钮的点击 */\n    onIntroBtnClick(event) {\n        this.userAgreementShowView.getComponent('HomeUserAgreementView').onShowView(true);\n    },\n\n    onGameType(event, customData) {\n        let typeIdx = parseInt(customData);\n        console.log('操作按钮事件');\n        switch (typeIdx) {\n            case 0: {   // 天天牛牛\n                //\n                console.log('登录家家乐成功',this.jajale,this.kefuView,this);\n            }\n                break;\n            case 1: {   // 家家乐\n                //\n                // 从大厅切换到游戏\n                cc.scn.socket.send(9000,{'sId': -1});\n\n                \n            }\n                break;\n            case 2: {   // 天天至尊\n                //\n            }\n                break;\n            case 3: {   // 龙虎斗\n                //\n            }\n                break;\n            case 4: {   // 天地玄黄\n                //\n                cc.director.loadScene('MallScene');\n            }\n                break;\n\n            default:\n                break;\n        }\n    },\n\n    /**  * 从大厅切换到游戏 成功回调*/\n    cutGameMessage: function() {\n\n        \n\n        \n        console.log('从大厅切换到游戏 成功',this.jajale);\n        // 断开 大厅的服务器  连接 游戏的服务器\n\n        cc.scn.socket.socket.onclose();\n        cc.scn.socket.socket = null;\n        cc.scn.socket.socket = {};\n        cc.scn.socket = socket.connect('jajale');\n        // console.log(cc.scn.socket);\n        // 游戏服务器连接成功\n        onfire.on(\"socketOpen\", function(data) {\n            // 登录家家乐\n            \n            if (data === 'jajale') {\n                // console.log(data,'这是什么东西');\n                let params = {\n                    \"token\": ttqp_global.currentUserData.token,\n                    \"roleId\": ttqp_global.currentUserInfo.roleId\n                };\n                cc.scn.socket.send(110101, params);\n            }\n            \n        });\n        // setTimeout(() => {\n        //     let params = {\n        //         \"token\": ttqp_global.currentUserData.token,\n        //         \"roleId\": ttqp_global.currentUserInfo.roleId\n        //     };\n        //     cc.scn.socket.send(110101, params);\n        // }, 0);\n\n        \n    },\n    test11() {\n        // var self = this;\n        console.log('登录家家乐成功',this.jajale,this.kefuView,this);\n        this.jajale.active = true;\n    }\n});\n"]}
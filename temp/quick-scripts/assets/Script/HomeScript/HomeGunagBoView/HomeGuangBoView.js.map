{"version":3,"sources":["HomeGuangBoView.js"],"names":["cc","Class","extends","Component","properties","radioLabelPrefab","Prefab","onLoad","broadcastList","HPool","initObjPool","onfire","on","onGetBroadcastData","bind","onCreateItem","length","windowSize","view","getVisibleSize","parentNodeW","width","newNode","node","setPosition","p","getComponent","init","splice","data","push","onNextGuanggao","onRecyclingNode","onRecyclingNodeToPool"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,0BAAkBL,GAAGM;AADb,KAHP;;AAOLC,YAAQ,kBAAY;;AAEhB,aAAKC,aAAL,GAAqB,EAArB;AACA;;AAEA;AACAC,cAAMC,WAAN,CAAkB,IAAlB,EAAwB,eAAxB;;AAEA;AACAC,eAAOC,EAAP,CAAU,wBAAV,EAAmC,KAAKC,kBAAL,CAAwBC,IAAxB,CAA6B,IAA7B,CAAnC;;AAEA,aAAKC,YAAL;AACH,KAnBI;;AAqBL;;;AAGAA,gBAxBK,0BAwBU;AACX,YAAI,KAAKP,aAAL,CAAmBQ,MAAnB,GAA4B,CAAhC,EAAmC;AAC/B,gBAAIC,aAAajB,GAAGkB,IAAH,CAAQC,cAAR,EAAjB;AACA,gBAAIC,cAAcH,WAAWI,KAAX,GAAmB,GAArC;;AAEA,gBAAIC,UAAUb,MAAMM,YAAN,CAAmB,KAAK,eAAL,CAAnB,EAA0C,KAAKV,gBAA/C,EAAiE,KAAKkB,IAAtE,CAAd;AACA;AACAD,oBAAQE,WAAR,CAAoBxB,GAAGyB,CAAH,CAAKL,WAAL,EAAkB,CAAC,GAAnB,CAApB;AACAE,oBAAQI,YAAR,CAAqB,iBAArB,EAAwCC,IAAxC,CAA6C,KAAKnB,aAAL,CAAmB,CAAnB,CAA7C;AACA,iBAAKA,aAAL,CAAmBoB,MAAnB,CAA0B,CAA1B,EAA6B,CAA7B;AACH;AACJ,KAnCI;AAqCLf,sBArCK,8BAqCcgB,IArCd,EAqCoB;AACrB,YAAIA,IAAJ,EAAU;AACN,iBAAKrB,aAAL,CAAmBsB,IAAnB,CAAwBD,IAAxB;AACA,gBAAI,KAAKrB,aAAL,CAAmBQ,MAAnB,IAA6B,CAAjC,EAAoC;AAChC,qBAAKD,YAAL;AACH;AACJ;AACJ,KA5CI;AA8CLgB,kBA9CK,4BA8CY;AACb,aAAKhB,YAAL;AACH,KAhDI;AAkDLiB,mBAlDK,2BAkDWT,IAlDX,EAkDiB;AAClBd,cAAMwB,qBAAN,CAA4B,IAA5B,EAAkC,eAAlC,EAAmDV,IAAnD;AACH;AApDI,CAAT","file":"HomeGuangBoView.js","sourceRoot":"../../../../../../assets/Script/HomeScript/HomeGunagBoView","sourcesContent":["// let guanggaos = [\n//     {\"sender\": \"测试测试测试测试1\", \"msg\": \"大师傅的按斯蒂芬1\"},\n//     {\"sender\": \"测试测试2\", \"msg\": \"大师傅的按时发大水发斯蒂芬2\"},\n//     {\"sender\": \"测试3\", \"msg\": \"大师傅的水发斯蒂芬3\"},\n//     {\"sender\": \"测试测试测试测试测试4\", \"msg\": \"大师傅的按时发大水发斯蒂芬4\"},\n//     {\"sender\": \"测试5\", \"msg\": \"大师傅的按时发大水发时发大水发斯蒂时发大水发斯蒂斯蒂芬5\"},\n//     {\"sender\": \"测试6\", \"msg\": \"大师傅的按时发大水发斯蒂芬6\"},\n//     {\"sender\": \"测试测试7\", \"msg\": \"大师傅的按时发大水发斯蒂时发大水发斯蒂芬7\"},\n//     {\"sender\": \"测试8\", \"msg\": \"大师傅的按时发大水发斯蒂芬8\"},\n//     {\"sender\": \"测试测试9\", \"msg\": \"大师傅的按时发大水时发大水发斯蒂时发大水发斯蒂发斯蒂芬9\"},\n//     {\"sender\": \"系统公告测试10\", \"msg\": \"大师傅的按时发大水发斯蒂芬10\"},\n// ];\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        radioLabelPrefab: cc.Prefab,\n    },\n\n    onLoad: function () {\n\n        this.broadcastList = [];\n        // this.broadcastList = guanggaos;\n\n        // 初始化对象池\n        HPool.initObjPool(this, 'HomeRadioPool')\n        \n        // 获取任务列表\n        onfire.on(\"HomeGetBroadcastHandle\",this.onGetBroadcastData.bind(this));\n\n        this.onCreateItem();\n    },\n\n    /**\n     * 创建广告标签\n     */\n    onCreateItem() {\n        if (this.broadcastList.length > 0) {\n            let windowSize = cc.view.getVisibleSize();\n            let parentNodeW = windowSize.width - 150;\n\n            let newNode = HPool.onCreateItem(this['HomeRadioPool'], this.radioLabelPrefab, this.node);\n            // newNode.getComponent(cc.Label).string = this.broadcastList[0].sender.toString() + ':' + this.broadcastList[0].msg.toString();\n            newNode.setPosition(cc.p(parentNodeW, -100));\n            newNode.getComponent('HomeGuangBoItem').init(this.broadcastList[0]);\n            this.broadcastList.splice(0, 1);\n        }\n    },\n\n    onGetBroadcastData(data) {\n        if (data) {\n            this.broadcastList.push(data);\n            if (this.broadcastList.length == 1) {\n                this.onCreateItem();\n            }\n        }\n    },\n\n    onNextGuanggao() {\n        this.onCreateItem();\n    },\n\n    onRecyclingNode(node) {\n        HPool.onRecyclingNodeToPool(this, 'HomeRadioPool', node);\n    },\n});"]}
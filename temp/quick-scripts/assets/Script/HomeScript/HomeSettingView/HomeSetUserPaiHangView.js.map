{"version":3,"sources":["HomeSetUserPaiHangView.js"],"names":["socket","require","cc","Class","extends","Component","properties","contentView","Node","userScrollView","ScrollView","scrollContent","userBangItem","Prefab","onLoad","onfire","on","onGetUserBangHandle","bind","onCreateItem","removeAllChildren","i","userList","length","user","item","instantiate","addChild","getComponent","init","onShowView","isShow","callback","setScale","scaleAmin1","scaleTo","scaleAmin2","runAction","sequence","onGetUserBangRequest","scaleAmin","node","active","scn","send","data","rankList","onCloseBtnClick","event"],"mappings":";;;;;;AAAA;AACA,IAAIA,SAASC,QAAQ,iBAAR,CAAb;;AAEAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,qBAAaL,GAAGM,IADR;;AAGRC,wBAAgBP,GAAGQ,UAHX;AAIRC,uBAAeT,GAAGM,IAJV;AAKRI,sBAAcV,GAAGW;AALT,KAHP;;AAWLC,UAXK,oBAWI;;AAELC,eAAOC,EAAP,CAAU,yBAAV,EAAqC,KAAKC,mBAAL,CAAyBC,IAAzB,CAA8B,IAA9B,CAArC;AACH,KAdI;AAgBLC,gBAhBK,0BAgBU;AACX,aAAKR,aAAL,CAAmBS,iBAAnB;AACA,aAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAI,KAAKC,QAAL,CAAcC,MAAlC,EAA0CF,GAA1C,EAA+C;AAC3C,gBAAMG,OAAO,KAAKF,QAAL,CAAcD,CAAd,CAAb;AACA,gBAAII,OAAOvB,GAAGwB,WAAH,CAAe,KAAKd,YAApB,CAAX;AACA,iBAAKD,aAAL,CAAmBgB,QAAnB,CAA4BF,IAA5B;AACAA,iBAAKG,YAAL,CAAkB,wBAAlB,EAA4CC,IAA5C,CAAiDL,IAAjD;AACH;AACJ,KAxBI;;;AA0BL;;;;;AAKAM,cA/BK,sBA+BMC,MA/BN,EA+BcC,QA/Bd,EA+BwB;AACzB,aAAKA,QAAL,GAAgBA,QAAhB;AACA,aAAKzB,WAAL,CAAiB0B,QAAjB,CAA0B,GAA1B,EAA+B,GAA/B;;AAEA,YAAIF,MAAJ,EAAY;AACR,gBAAIG,aAAahC,GAAGiC,OAAH,CAAW,QAAX,EAAqB,GAArB,EAA0B,GAA1B,CAAjB;AACA,gBAAIC,aAAalC,GAAGiC,OAAH,CAAW,GAAX,EAAgB,CAAhB,EAAmB,CAAnB,CAAjB;AACA,iBAAK5B,WAAL,CAAiB8B,SAAjB,CAA2BnC,GAAGoC,QAAH,CAAYJ,UAAZ,EAAwBE,UAAxB,CAA3B;;AAEA;AACA,iBAAKG,oBAAL;AACH,SAPD,MAOO;AACH,gBAAIC,YAAYtC,GAAGiC,OAAH,CAAW,CAAX,EAAc,GAAd,EAAmB,GAAnB,CAAhB;AACA,iBAAK5B,WAAL,CAAiB8B,SAAjB,CAA2BG,SAA3B;AACH;AACD,aAAKC,IAAL,CAAUC,MAAV,GAAmBX,MAAnB;AACH,KA/CI;;;AAiDL;AACAQ,wBAlDK,kCAkDkB;AACnBrC,WAAGyC,GAAH,CAAO3C,MAAP,CAAc4C,IAAd,CAAmB,KAAnB;AACH,KApDI;;;AAsDL;AACA3B,uBAvDK,+BAuDe4B,IAvDf,EAuDqB;AACtB,YAAIA,QAAQA,KAAKC,QAAb,IAAyBD,KAAKC,QAAL,CAAcvB,MAAd,GAAuB,CAApD,EAAuD;AACnD,iBAAKD,QAAL,GAAgBuB,KAAKC,QAArB;AACA,iBAAK3B,YAAL;AACH;AACJ,KA5DI;;;AA8DL;;;;AAIA4B,mBAlEK,2BAkEWC,KAlEX,EAkEkB;AACnB,aAAKlB,UAAL,CAAgB,KAAhB,EAAuB,KAAKE,QAA5B;AACH;AApEI,CAAT","file":"HomeSetUserPaiHangView.js","sourceRoot":"../../../../../../assets/Script/HomeScript/HomeSettingView","sourcesContent":["// 发接口对象\nvar socket = require(\"websocketScript\");\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        contentView: cc.Node,\n\n        userScrollView: cc.ScrollView,\n        scrollContent: cc.Node,\n        userBangItem: cc.Prefab,\n    },\n\n    onLoad() {\n        \n        onfire.on(\"HomeDailiUserBangHandle\", this.onGetUserBangHandle.bind(this));\n    },\n\n    onCreateItem() {\n        this.scrollContent.removeAllChildren();\n        for (let i = 0; i < this.userList.length; i++) {\n            const user = this.userList[i];\n            let item = cc.instantiate(this.userBangItem);\n            this.scrollContent.addChild(item);\n            item.getComponent('HomeSetUserPaiHangItem').init(user);\n        }\n    },\n\n    /**\n     * 弹出/关闭 窗口\n     * @param {是否弹出} isShow       \n     * @param {回调函数，在点击使用的时候回调} callback \n     */\n    onShowView(isShow, callback) {\n        this.callback = callback;\n        this.contentView.setScale(0.8, 0.8);\n\n        if (isShow) {\n            var scaleAmin1 = cc.scaleTo(0.000001, 0.8, 0.8);\n            var scaleAmin2 = cc.scaleTo(0.2, 1, 1);\n            this.contentView.runAction(cc.sequence(scaleAmin1, scaleAmin2));\n\n            // 拉取数据\n            this.onGetUserBangRequest();\n        } else {\n            var scaleAmin = cc.scaleTo(0, 0.8, 0.8);\n            this.contentView.runAction(scaleAmin);\n        }\n        this.node.active = isShow;\n    },\n\n    /*********************** 发送接口 ***********************/\n    onGetUserBangRequest() {\n        cc.scn.socket.send(10902);\n    },\n\n    /*********************** 接口回调 ***********************/\n    onGetUserBangHandle(data) {\n        if (data && data.rankList && data.rankList.length > 0) {\n            this.userList = data.rankList;\n            this.onCreateItem();\n        }\n    },\n\n    /**\n     * 点击关闭按钮\n     * 或者判断是否是点击了灰色背景View，如果是点击灰色背景View，让弹窗消失\n     */\n    onCloseBtnClick(event) {\n        this.onShowView(false, this.callback);\n    },\n});\n"]}
{"version":3,"sources":["HomeEmailShowView.js"],"names":["socket","require","cc","Class","extends","Component","properties","contentView","Node","scrollView","ScrollView","scrollContent","friendEmailBtn","systemEmailBtn","systemMsgBtn","emptyBgView","emailItemPrefab","Prefab","systemMsgPrefab","emailDetailView","emailSendView","onLoad","itemIdx","self","node","getComponent","onClickLightGrayBg","onShowView","scrollViewEventHandler","EventHandler","target","component","handler","scroll","scrollEvents","push","onfire","on","emailDataBlock","bind","emailReadBlock","emailDelBlock","onCreateItem","emailData","removeAllChildren","length","active","i","item","itemDic","instantiate","init","itemData","clickIdx","onClickGoDetailBtnConfig","addChild","onInitReqParamsConfigs","reqParamsConfigs","list","isShow","callback","moveAction","moveTo","p","runAction","onEmailTypeBtnClick","setPositionY","onGetEmailData","typeIdx","idx","page","params","scn","send","onReadEmailRequest","emailID","onDelEmailRequest","data","concat","isRead","splice","onConfigEmailTypeBtn","isFriend","isSystemEmail","isSystemMsg","onStatus","toString","parseFloat","gold","parseInt","isRec","mailId","menusIdx","currentItemData","fromId","onEmailLoadMoreHandle","scrollview","eventType","EventType","BOUNCE_BOTTOM","BOUNCE_TOP","console","log","onCloseBtnClick","event","onSendBtnClick","customData"],"mappings":"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","file":"HomeEmailShowView.js","sourceRoot":"../../../../../../assets/Script/HomeScript/HomeEmailShowView","sourcesContent":["// 发接口对象\nvar socket = require(\"websocketScript\");\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // 子控件的背景View\n        contentView: cc.Node,\n        // 滑动视图\n        scrollView: cc.ScrollView,\n        scrollContent: cc.Node,\n\n        // 好友邮件 类型按钮\n        friendEmailBtn: cc.Node,\n        // 系统邮件 类型按钮\n        systemEmailBtn: cc.Node,\n        // 系统消息 类型按钮\n        systemMsgBtn: cc.Node,\n\n        // 空邮件提示\n        emptyBgView: cc.Node,\n\n        // 邮件Item的Prefab\n        emailItemPrefab: cc.Prefab,\n        // 系统消息Prefab\n        systemMsgPrefab: cc.Prefab,\n\n        // 邮件详情弹窗\n        emailDetailView: cc.Node,\n\n        // 发送邮件窗口\n        emailSendView: cc.Node,\n    },\n\n    onLoad() {\n        this.itemIdx = -1;\n\n        var self = this;\n        this.node.getComponent('HomeSyncClickBgNode').onClickLightGrayBg(() => {\n            self.onShowView(false);\n        });\n\n        // 给邮件的滑动视图view 添加上拉加载功能操作\n        var scrollViewEventHandler = new cc.Component.EventHandler();\n        scrollViewEventHandler.target = this.node; //这个 node 节点是你的事件处理代码组件所属的节点\n        scrollViewEventHandler.component = \"HomeEmailShowView\";//这个是代码文件名\n        scrollViewEventHandler.handler = \"onEmailLoadMoreHandle\";// 触发上拉加载回调\n        var scroll = this.scrollView.getComponent(cc.ScrollView);\n        scroll.scrollEvents.push(scrollViewEventHandler);\n\n        // 接收消息列表的接口回调\n        onfire.on(\"EmailDataHandle\", this.emailDataBlock.bind(this));\n        // 读文件接口回调\n        onfire.on(\"EmailReadHandle\", this.emailReadBlock.bind(this));\n        // 删除邮件接口回调\n        onfire.on(\"EmailDelHandle\", this.emailDelBlock.bind(this));\n    },\n\n    /**\n     * 创建Item\n     */\n    onCreateItem() {\n        if (!this.emailData) return;\n\n        this.scrollContent.removeAllChildren();\n\n        if (this.emailData.length == 0) {\n            this.scrollView.active = false;\n            this.emptyBgView.active = true;\n        } else {\n            this.scrollView.active = true;\n            this.emptyBgView.active = false;\n\n            var self = this;\n            for (var i = 0; i < this.emailData.length; i++) {\n                var item;\n                var itemDic = this.emailData[i];\n                if (this.itemIdx != 2) {\n                    item = cc.instantiate(this.emailItemPrefab);\n                    item.getComponent('HomeEmailItem').init(\n                        itemDic, i, (itemData, clickIdx) => {\n                            self.onClickGoDetailBtnConfig(itemData, clickIdx);\n                        });\n                } else {\n                    item = cc.instantiate(this.systemMsgPrefab);\n                    item.getComponent('HomeEmailSystemMsgItem').init(itemDic);\n                }\n                this.scrollContent.addChild(item);\n            }\n        }\n    },\n\n    // 初始化数据配置数组\n    onInitReqParamsConfigs() {\n        this.reqParamsConfigs = [\n            { \"page\": 0, list: [] },\n            { \"page\": 0, list: [] },\n            { \"page\": 0, list: [] },\n        ];\n    },\n\n    /**\n     * 弹出/关闭 窗口\n     * @param {是否弹出} isShow\n     */\n    onShowView(isShow, callback) {\n        this.callback = callback;\n\n        this.node.active = isShow;\n        if (isShow) {\n            var moveAction = cc.moveTo(0.2, cc.p(0, 0));\n            this.contentView.runAction(moveAction);\n\n            // 获取本类数据\n            this.onInitReqParamsConfigs();\n            this.onEmailTypeBtnClick(null, (this.itemIdx == -1 ? 0 : this.itemIdx));\n        } else {\n            this.contentView.setPositionY(-1300);\n        }\n    },\n\n    /****************************************  本类接口相关  ****************************************/\n    // 获取 邮件列表 数据\n    onGetEmailData(typeIdx) {\n        var idx = 2;\n        // 决定邮件类型\n        if (typeIdx == 0) idx = 2;\n        if (typeIdx == 1) idx = 1;\n        if (typeIdx == 2) idx = 0;\n\n        // 页数配置\n        var page = this.reqParamsConfigs[typeIdx].page;\n\n        let params = {\n            \"mailType\": idx,\n            \"page\": page\n        };\n        cc.scn.socket.send(10301, params);\n    },\n    // 发送 阅读邮件 接口\n    onReadEmailRequest(emailID) {\n        let params = {\n            \"mailId\": emailID\n        };\n        cc.scn.socket.send(10303, params);\n    },\n    // 发送 删除邮件 接口\n    onDelEmailRequest(emailID) {\n        let params = {\n            \"mailId\": emailID\n        };\n        cc.scn.socket.send(10304, params);\n    },\n\n    /****************************************  本类接口回调相关  ****************************************/\n    // 获取服务器返回的 邮件列表 信息\n    emailDataBlock(data) {\n        if (!data) return;\n        this.emailData = this.reqParamsConfigs[this.itemIdx].list.concat(data);\n        if (data.length > 0) {\n            this.reqParamsConfigs[this.itemIdx].page += 1;\n        }\n        this.reqParamsConfigs[this.itemIdx].list = this.emailData;\n\n        this.onCreateItem();\n    },\n    // 阅读邮件接口 回调\n    emailReadBlock(data) {\n        this.emailData[this.clickIdx].isRead = '1';\n        this.reqParamsConfigs[this.itemIdx].list = this.emailData;\n\n        // 重新配置item\n        this.onCreateItem();\n    },\n    // 删除邮件回调\n    emailDelBlock(data) {\n        this.clickIdx = this.clickIdx >= 0 ? this.clickIdx : 0;\n        this.emailData.splice(this.clickIdx, 1);\n        this.reqParamsConfigs[this.itemIdx].list = this.emailData;\n        this.onCreateItem();\n    },\n\n\n    // 配置邮件类型按钮\n    onConfigEmailTypeBtn(isFriend, isSystemEmail, isSystemMsg) {\n        this.friendEmailBtn.getComponent('HomeSelectImgTitleBtn').onStatus(isFriend);\n        this.systemEmailBtn.getComponent('HomeSelectImgTitleBtn').onStatus(isSystemEmail);\n        this.systemMsgBtn.getComponent('HomeSelectImgTitleBtn').onStatus(isSystemMsg);\n    },\n\n    /**\n     * 处理点击查看邮件详情后的处理\n     */\n    onClickGoDetailBtnConfig(itemData, clickIdx) {\n        this.clickIdx = clickIdx;\n        if (itemData.isRead.toString() == '0') {\n\n            if (parseFloat(itemData.gold) > 0 && parseInt(itemData.isRec) == 0) { }\n            else {\n                // 发送 邮件阅读 接口\n                this.onReadEmailRequest(itemData.mailId);\n            }\n        }\n\n        var self = this;\n        // 弹出详情弹窗\n        this.emailDetailView.getComponent('HomeEmailDetailView').onShowView(true, this.itemIdx == 0, itemData, (menusIdx, currentItemData) => {\n            /** menusIdx：详情里面所有功能的按钮点击\n             *  0：回复     1：删除     2：领取     3：是否同意好友请求\n             */\n            switch (menusIdx) {\n                case 0: {\n                    self.emailSendView.getComponent('HomeEmailSendView').onShowView(true, currentItemData.fromId.toString());\n                }\n                    break;\n                case 1:\n                    self.onDelEmailRequest(currentItemData.mailId);\n                    break;\n                case 2: {\n                    // 发送 邮件阅读 接口\n                    self.onReadEmailRequest(itemData.mailId);\n                }\n                    break;\n                case 3: {\n                    self.emailData[self.clickIdx] = currentItemData;\n                    self.reqParamsConfigs[self.itemIdx].list = self.emailData;\n                }\n                    break;\n            }\n        });\n    },\n\n    /****************************************  本类事件监听  ****************************************/\n\n    /**\n     * 滑动视图 ScrollView 的上拉加载\n     */\n    onEmailLoadMoreHandle(scrollview, eventType) {\n        if (eventType === cc.ScrollView.EventType.BOUNCE_BOTTOM) {\n            this.onGetEmailData(this.itemIdx);\n        } else if (eventType === cc.ScrollView.EventType.BOUNCE_TOP) {\n            console.log(\"下拉刷新1111111111111·········\");\n        }\n    },\n\n    /**\n     * 关闭按钮的点击\n     */\n    onCloseBtnClick(event) {\n        this.onShowView(false);\n    },\n\n    onSendBtnClick(event) {\n        this.emailSendView.getComponent('HomeEmailSendView').onShowView(true, \"\");\n    },\n\n    /**\n     * 邮件类型按钮切换\n     * @param {按钮事件} event \n     * @param {属性编辑器中传递过来的数据} customData \n     */\n    onEmailTypeBtnClick(event, customData) {\n        var typeIdx = parseInt(customData);\n\n        this.itemIdx = typeIdx;\n\n        switch (typeIdx) {\n            case 0:\n                this.onConfigEmailTypeBtn(true, false, false);\n                break;\n            case 1:\n                this.onConfigEmailTypeBtn(false, true, false);\n                break;\n            case 2:\n                this.onConfigEmailTypeBtn(false, false, true);\n                break;\n\n            default:\n                break;\n        }\n        this.onGetEmailData(this.itemIdx);\n    }\n});\n"]}
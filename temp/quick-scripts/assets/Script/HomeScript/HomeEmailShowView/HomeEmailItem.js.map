{"version":3,"sources":["HomeEmailItem.js"],"names":["cc","Class","extends","Component","properties","emailIconBtn","Node","giftBoxIcon","nameLabel","Label","contentLabel","goDetailBtn","redPointIcon","onLoad","init","itemData","forIdx","onGoDetailHandle","string","nickname","onSubString","content","getComponent","onStatus","isRead","active","gold","toString","length","tag","fontSize","maxWidth","newString","i","onGoDetailBtnClick","event","currentTarget","isOpen"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACR;AACAC,sBAAcL,GAAGM,IAFT;AAGR;AACAC,qBAAaP,GAAGM,IAJR;AAKR;AACAE,mBAAWR,GAAGS,KANN;AAOR;AACAC,sBAAcV,GAAGS,KART;AASR;AACAE,qBAAaX,GAAGM,IAVR;AAWR;AACA;;AAEA;AACAM,sBAAcZ,GAAGM;AAfT,KAHP;;AAqBLO,UArBK,oBAqBI,CAER,CAvBI;;;AAyBL;;;AAGAC,QA5BK,gBA4BAC,QA5BA,EA4BUC,MA5BV,EA4BkBC,gBA5BlB,EA4BoC;AACrC,YAAI,CAACF,QAAL,EAAe;AACf,aAAKA,QAAL,GAAgBA,QAAhB;AACA,aAAKE,gBAAL,GAAwBA,gBAAxB;;AAEA,aAAKT,SAAL,CAAeU,MAAf,GAAwBH,SAASI,QAAjC;;AAEA,aAAKT,YAAL,CAAkBQ,MAAlB,GAA2B,KAAKE,WAAL,CAAiBL,SAASM,OAA1B,CAA3B;;AAEA,aAAKhB,YAAL,CAAkBiB,YAAlB,CAA+B,eAA/B,EAAgDC,QAAhD,CAAyDR,SAASS,MAAT,IAAmB,GAA5E;AACA,aAAKZ,YAAL,CAAkBa,MAAlB,GAA2BV,SAASS,MAAT,IAAmB,GAA9C;;AAEA,aAAKjB,WAAL,CAAiBkB,MAAjB,GAA0BV,SAASW,IAAT,CAAcC,QAAd,GAAyBC,MAAzB,GAAkC,CAA5D;;AAEA,aAAKjB,WAAL,CAAiBW,YAAjB,CAA8B,uBAA9B,EAAuDC,QAAvD,CAAgER,SAASS,MAAT,IAAmB,GAAnF;AACA,aAAKb,WAAL,CAAiBkB,GAAjB,GAAuBb,MAAvB;;AAEA;AACH,KA9CI;;;AAgDL;AACAI,eAjDK,uBAiDOF,MAjDP,EAiDeY,QAjDf,EAiDyBC,QAjDzB,EAiDmC;;AAEpC,YAAIC,YAAY,EAAhB;AACA,aAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIf,OAAOU,MAA3B,EAAmCK,GAAnC,EAAwC;AACpC,gBAAIA,IAAI,EAAR,EAAY;AACRD,6BAAad,OAAOe,CAAP,CAAb;AACH,aAFD,MAEO;AACHD,6BAAa,KAAb;AACA;AACH;AACJ;AACD,eAAOA,SAAP;AACH,KA7DI;;;AA+DL;;;;AAIA;AACAE,wBAAoB,4BAAUC,KAAV,EAAiB;AACjC,YAAIN,MAAMM,MAAMC,aAAN,CAAoBP,GAA9B;;AAEA,YAAI,KAAKZ,gBAAT,EAA2B;AACvB,iBAAKF,QAAL,CAAcsB,MAAd,GAAuB,GAAvB;AACA,iBAAKzB,YAAL,CAAkBa,MAAlB,GAA2B,KAA3B;AACA,iBAAKR,gBAAL,CAAsB,KAAKF,QAA3B,EAAqCc,GAArC;AACH;AACJ;AA5EI,CAAT","file":"HomeEmailItem.js","sourceRoot":"../../../../../../assets/Script/HomeScript/HomeEmailShowView","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // 左边邮件是否打开的图标\n        emailIconBtn: cc.Node,\n        // 是否有附件的图标\n        giftBoxIcon: cc.Node,\n        // 昵称标签\n        nameLabel: cc.Label,\n        // 内容标签\n        contentLabel: cc.Label,\n        // 右边是否已经查看邮件的按钮\n        goDetailBtn: cc.Node,\n        // 右边是否查看过邮件的按钮内的文字按钮\n        // statusTitleBtn: cc.Node,\n\n        // 红点\n        redPointIcon: cc.Node,\n    },\n\n    onLoad() {\n\n    },\n\n    /**\n     * 配置本类UI\n     */\n    init(itemData, forIdx, onGoDetailHandle) {\n        if (!itemData) return;\n        this.itemData = itemData;\n        this.onGoDetailHandle = onGoDetailHandle;\n\n        this.nameLabel.string = itemData.nickname;\n        \n        this.contentLabel.string = this.onSubString(itemData.content);\n\n        this.emailIconBtn.getComponent('HomeSelectBtn').onStatus(itemData.isRead == \"1\");\n        this.redPointIcon.active = itemData.isRead == \"0\";\n\n        this.giftBoxIcon.active = itemData.gold.toString().length > 0;\n\n        this.goDetailBtn.getComponent('HomeSelectImgTitleBtn').onStatus(itemData.isRead == \"1\");\n        this.goDetailBtn.tag = forIdx;\n\n        // this.statusTitleBtn.getComponent('HomeSelectBtn').onStatus(itemData.isRead == \"1\");\n    },\n\n    // 判断字符串是否超过20，超过后打点\n    onSubString(string, fontSize, maxWidth) {\n\n        let newString = \"\";\n        for (let i = 0; i < string.length; i++) {\n            if (i < 20) {\n                newString += string[i];\n            } else {\n                newString += \"...\";\n                break;\n            }\n        }\n        return newString;\n    },\n\n    /**\n     * 设置点击查看按钮的tag值\n     */\n\n    /********************************  监听本类事件 ********************************/\n    onGoDetailBtnClick: function (event) {\n        var tag = event.currentTarget.tag;\n\n        if (this.onGoDetailHandle) {\n            this.itemData.isOpen = \"1\";\n            this.redPointIcon.active = false;\n            this.onGoDetailHandle(this.itemData, tag);\n        }\n    },\n});\n"]}